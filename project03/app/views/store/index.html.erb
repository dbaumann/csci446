<h1>Your Catalog</h1>

<% if @index_count > 5 %>
<p>you've visited this page <%= pluralize(@index_count, "time") %>!</p>
<% end %>

<% @products.each do |product| -%>
  <div class="entry"> 
    <%= link_to image_tag(product.image_url), :method => :post, :action => 'add_to_cart', :id => product %>
    <h3><%=h product.title %></h3>
    <p><%= product.description %></p>
    <div class="price-line">
      <!-- helper number_to_currency is defined in or inherited in the class
      that uses this file, into which the appropriate helpers are mixed in -->
      <span class="price"><%= number_to_currency(product.price) %></span>
      <!-- Embedding knowledge of the currency concept into the view -->
      
      <!-- REMEMBER the button_to helper represents an element that will generate a
      POST request -->
      <%= button_to 'Add to Cart', :action => 'add_to_cart', :id => product %>
      <!-- Interesting that it's product and not product.id -->
      
    </div>
  </div>
<% end %>
